(()=>{"use strict";var e={p:""};const t=e.p+"425ba4b952dc2662826f1b21f2878129.png";class n{constructor(e="Cartagena"){this.apiKey="7bdcdde2d5d6a24b989f640d5b52505d",this.city=e}static convertKtoC(e){return{temp:`${Math.floor(e-273.15)} °`,type:"C"}}convertDatatoObj(e){return{type:n.convertKtoC(e.main.temp).type,city:this.city,temperature:n.convertKtoC(e.main.temp).temp,feels_like:n.convertKtoC(e.main.feels_like).temp,humidity:e.main.humidity,climate:e.weather[0].description,icon:e.weather[0].icon}}static showErrors(){const e=document.getElementById("conten");e.innerHTML="";document.getElementById("type").innerHTML="";const n=document.createElement("img");n.src=t,e.append(n)}async getApiData(){try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${this.city}&appid=${this.apiKey}`,{mode:"cors"}),t=await e.json();return this.convertDatatoObj(t)}catch(e){return setTimeout(n.showErrors,200)}}}const r=n;class a{constructor(e){this.data=e,this.content=document.getElementById("conten")}renderTemp(){this.content.innerHTML="";const e=document.createElement("h1");e.className="city-title";const t=document.createElement("p"),n=document.createElement("p");e.innerHTML=this.data.city,t.innerHTML=`Temp: ${this.data.temperature}`,t.id="main-temp",t.className="temp-container",n.innerHTML=`Fells like: ${this.data.feels_like}`,n.className="temp-container",n.id="feels-temp",this.content.append(e),this.content.append(t),this.content.append(n)}static fFormula(e){return`${Math.round(1.8*Number(e)+32)} °`}static cFormula(e){return`${Math.round((Number(e)-32)*(5/9))} °`}static callTemps(e){const t=document.getElementById("main-temp"),n=document.getElementById("feels-temp"),r=n.innerHTML.split(" ")[2],a=t.innerHTML.split(" ")[1];return t.innerHTML=`Temp: ${e(a)}`,n.innerHTML=`Fells like: ${e(r)}`,t}static convertToF(){return a.callTemps(a.fFormula)}static convertToC(){return a.callTemps(a.cFormula)}static checkDegrees(){"C"===this.innerHTML?(a.convertToF(),this.innerHTML="F"):(a.convertToC(),this.innerHTML="C")}renderDegrees(){const e=document.getElementById("type"),t=document.createElement("button");t.id="degrees",t.className="degrees",t.innerHTML=this.data.type,t.addEventListener("click",a.checkDegrees),e.append(t)}renderHumidity(){const e=document.createElement("p");e.innerHTML=`Humidity: ${this.data.humidity}`,e.className="temp-container",this.content.append(e)}renderclimate(){const e=document.createElement("p"),t=document.getElementsByTagName("body")[0];if(this.data.icon){const e=this.data.icon.split("")[2];t.className="n"===e?"bg-nigth":"bg-day"}e.innerHTML=`Climate: ${this.data.climate}`,e.className="temp-container";const n=document.createElement("img");n.className="climate-image",n.src=`http://openweathermap.org/img/wn/${this.data.icon}@4x.png`,this.content.append(e),this.content.append(n)}}const i=a;class c{constructor(){this.container=document.getElementById("container"),this.errors=document.getElementById("errors"),this.defaultCity="Cartagena"}static renderCall(e){const t=new i(e);t.renderDegrees(),t.renderTemp(),t.renderHumidity(),t.renderclimate()}static weatherCall(e){new r(e.value).getApiData().then((e=>{c.renderCall(e)}))}createForm(){c.weatherCall(this.defaultCity);const e=document.createElement("form"),t=document.createElement("input"),n=document.createElement("button");return this.container.className="form-container",e.action="/home",e.id="from-city",t.type="text",t.name="city",t.placeholder="Type a city",n.innerHTML="Submit",n.type="submit",e.append(t),e.append(n),this.container.append(e),e}inputValidation(e){if(!e){this.errors.innerHTML="",this.errors.className="d-none";const e=document.createElement("p");return document.getElementById("blank-error")?(e.innerHTML="City can't be blank",this.errors.append(e)):(this.errors.className="form-error",e.id="blank-error",e.innerHTML="City can't be blank",this.errors.append(e)),!1}return!0}sumitInfo(){const e=document.getElementById("from-city");e.addEventListener("submit",(t=>{t.preventDefault();const n=e.elements.city;if(n.value){this.errors.innerHTML="",this.errors.className="d-none";const e=document.getElementById("degrees");e&&e.remove()}this.inputValidation(n.value)&&(c.weatherCall(n),n.value="")}))}}const s=new c;s.createForm(),s.sumitInfo()})();